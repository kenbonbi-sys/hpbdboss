<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday, Boss ‚ú®</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÇ</text></svg>">
  <style>
    :root{--bg1:#0b1020;--bg2:#1a0f2b;--card:rgba(255,255,255,.08);--text:rgba(255,255,255,.92);--muted:rgba(255,255,255,.72);--accent1:#ffb3c8;--accent2:#ffd6a5;--accent3:#cdb4ff}
    *{box-sizing:border-box}html{scroll-behavior:smooth}html,body{height:100%}
    body{margin:0;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:radial-gradient(1200px 700px at 20% 10%,rgba(255,179,200,.20),transparent 55%),radial-gradient(900px 700px at 90% 25%,rgba(205,180,255,.18),transparent 52%),radial-gradient(1100px 700px at 50% 110%,rgba(255,214,165,.12),transparent 55%),linear-gradient(180deg,var(--bg1),var(--bg2));overflow-x:hidden}
    a{color:inherit}.wrap{max-width:1120px;margin:0 auto;padding:24px 18px 80px}
    .nav{position:sticky;top:0;z-index:10;backdrop-filter:blur(10px);background:rgba(10,12,25,.55);border-bottom:1px solid rgba(255,255,255,.08)}
    .navIn{max-width:1120px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;cursor:pointer}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:var(--muted)}
    .links{display:flex;gap:10px;flex-wrap:wrap}.links a{text-decoration:none;font-size:13px;color:var(--muted);padding:8px 10px;border-radius:12px}
    .spacer{flex:1}.btn{border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:var(--text);padding:10px 12px;border-radius:14px;font-weight:750;cursor:pointer;transition:all 0.2s}
    .btnPrimary{background:linear-gradient(135deg,rgba(255,179,200,.95),rgba(255,214,165,.90));color:#12131a;border:none;box-shadow:0 16px 40px rgba(0,0,0,.35)}
    .grid{display:grid;gap:14px}.grid2{grid-template-columns:1.2fr .8fr}.grid3{grid-template-columns:repeat(3,1fr)}
    @media(max-width:900px){.grid2,.grid3{grid-template-columns:1fr}.badge,.links{display:none}h1{font-size:32px!important}.menuToggle{display:block!important}}
    .menuToggle{display:none;background:transparent;border:1px solid rgba(255,255,255,.18);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.12);border-radius:22px;padding:18px;box-shadow:0 22px 70px rgba(0,0,0,.35)}
    .kicker{color:var(--muted);font-size:13px;letter-spacing:.18em;text-transform:uppercase}
    h1{margin:10px 0 8px;font-size:44px;line-height:1.05}h2{margin:0 0 10px;font-size:26px}p{margin:8px 0;color:var(--muted);line-height:1.6}
    .hr{height:1px;background:rgba(255,255,255,.10);margin:14px 0;border:0}
    .hero{padding:26px;position:relative;overflow:hidden}
    .glow{position:absolute;inset:-120px -120px auto auto;width:520px;height:520px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,179,200,.35),transparent 55%);pointer-events:none;animation:pulse 4s ease-in-out infinite}
    @keyframes pulse{0%,100%{opacity:0.8;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}
    .pillRow{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .pill{font-size:12px;padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.18);color:rgba(255,255,255,.78)}
    .stat{display:flex;gap:12px;padding:14px;border-radius:18px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18);transition:transform 0.2s}
    .stat:hover{transform:translateX(4px)}.dot{width:11px;height:11px;border-radius:50%;background:linear-gradient(135deg,var(--accent1),var(--accent2));margin-top:6px}
    .msgGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}@media(max-width:900px){.msgGrid{grid-template-columns:1fr}}
    .msgCard{border-radius:18px;padding:14px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.16);transition:transform 0.2s}
    .msgCard:hover{transform:translateY(-4px)}.who{font-weight:800}.tag{font-size:12px;color:var(--muted)}.quote{margin-top:8px;color:rgba(255,255,255,.78)}
    .galleryGrid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:12px}@media(max-width:600px){.galleryGrid{grid-template-columns:1fr}}
    .galleryItem{width:100%;aspect-ratio:4/3;border-radius:16px;border:2px solid rgba(255,255,255,.15);object-fit:cover;transition:transform 0.3s}
    .galleryItem:hover{transform:scale(1.02)}
    canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:100}
    .confetti-icon{position:fixed;bottom:30px;left:30px;font-size:55px;z-index:99;cursor:pointer;filter:drop-shadow(0 8px 20px rgba(0,0,0,.4));transition:transform 0.1s}
    .sparkle{position:fixed;pointer-events:none;font-size:20px;z-index:98;animation:sparkleAnim 0.8s forwards}
    @keyframes sparkleAnim{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0) translateY(-30px)}}
    .balloon{position:fixed;bottom:-100px;font-size:45px;z-index:97;animation:floatUp 6s forwards;pointer-events:none}
    @keyframes floatUp{0%{bottom:-100px}100%{bottom:110vh;opacity:0}}
    .floating-heart{position:fixed;font-size:28px;z-index:98;pointer-events:none;animation:heartFloat 1.5s forwards}
    @keyframes heartFloat{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-100px)}}
    .music-btn{position:fixed;bottom:30px;right:30px;width:50px;height:50px;border-radius:50%;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.1);color:#fff;font-size:22px;cursor:pointer;z-index:99;display:flex;align-items:center;justify-content:center}
    .music-btn:hover{background:rgba(255,255,255,.2);transform:scale(1.1)}
    .music-btn.playing{animation:pulse-music 1s infinite;border-color:var(--accent1)}
    @keyframes pulse-music{0%,100%{box-shadow:0 0 0 0 rgba(255,179,200,.4)}50%{box-shadow:0 0 0 15px rgba(255,179,200,0)}}
    .music-modal{display:none;position:fixed;bottom:100px;right:30px;z-index:99}
    .music-modal.show{display:block}
    .music-modal-content{background:rgba(15,16,26,.95);border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:12px;box-shadow:0 20px 60px rgba(0,0,0,.5)}
    .music-close{position:absolute;top:-10px;right:-10px;width:28px;height:28px;border-radius:50%;border:none;background:var(--accent1);color:#000;font-weight:bold;cursor:pointer;font-size:14px}
    .countdown-overlay{position:fixed;inset:0;background:var(--bg1);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:300;transition:opacity 0.5s}
    .countdown-overlay.hide{opacity:0;pointer-events:none}
    .countdown-number{font-size:150px;font-weight:900;background:linear-gradient(135deg,var(--accent1),var(--accent2),var(--accent3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:countPop 0.5s}
    .countdown-text{font-size:24px;color:var(--muted);margin-top:20px}@keyframes countPop{0%{transform:scale(0.5);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1)}}
    .scratch-container{position:relative;width:100%;max-width:400px;height:120px;margin:16px auto 0;border-radius:16px;overflow:hidden;cursor:crosshair}
    .scratch-reveal{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:16px;font-size:18px;font-weight:700;background:linear-gradient(135deg,rgba(255,179,200,.2),rgba(205,180,255,.2));border:2px solid rgba(255,255,255,.2);border-radius:16px}
    .scratch-canvas{position:absolute;inset:0;border-radius:16px;cursor:crosshair;touch-action:none}
    .slot-machine{background:rgba(0,0,0,.3);border:2px solid rgba(255,255,255,.15);border-radius:18px;padding:20px;text-align:center;margin-top:16px}
    .slot-display{display:flex;justify-content:center;gap:10px;margin:16px 0}
    .slot-item{width:80px;height:80px;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.2);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:40px}
    .slot-item.spinning{animation:slotSpin 0.1s infinite}@keyframes slotSpin{0%{transform:translateY(-5px)}50%{transform:translateY(5px)}100%{transform:translateY(-5px)}}
    .slot-result{min-height:50px;padding:12px;border-radius:12px;background:rgba(255,255,255,.05);margin-top:12px;color:var(--muted)}
    .firework{position:fixed;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:101;animation:fireworkBurst 0.8s forwards}
    @keyframes fireworkBurst{0%{transform:translate(0,0);opacity:1}100%{transform:translate(var(--tx),var(--ty));opacity:0}}
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.62);display:none;align-items:center;justify-content:center;padding:18px;z-index:50}
    .modal{width:min(960px,100%);border-radius:22px;border:1px solid rgba(255,255,255,.16);background:rgba(15,16,26,.88);backdrop-filter:blur(10px);overflow:hidden}
    .modalTop{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.10)}.closeX{margin-left:auto}
    .modalBody{padding:14px}.videoBox{width:100%;aspect-ratio:16/9;border-radius:16px;border:1px dashed rgba(255,255,255,.22);display:grid;place-items:center;color:rgba(255,255,255,.70);background:rgba(0,0,0,.18)}
    .secret{display:none;margin-top:12px;padding:12px 14px;border-radius:16px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06)}
    .q{padding:14px;border-radius:18px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.16);margin-top:12px}
    .opt{display:block;margin-top:10px;cursor:pointer}.result{display:none;margin-top:12px;padding:12px 14px;border-radius:16px;border:1px solid rgba(167,243,208,.35);background:rgba(167,243,208,.10)}
    .loading{position:fixed;inset:0;background:var(--bg1);display:flex;align-items:center;justify-content:center;z-index:200;transition:opacity 0.5s}.loading.hide{opacity:0;pointer-events:none}
    .loadingText{font-size:24px;font-weight:800;animation:blink 1s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:0.5}}

    /* Mobile menu: toggle .show */
    @media(max-width:900px){
      .links.show{
        display:flex !important;
        width:100%;
        flex-direction:column;
        gap:6px;
        padding:10px 0 2px;
      }
      .links.show a{
        border:1px solid rgba(255,255,255,.12);
        background:rgba(0,0,0,.12);
      }
    }

    /* Voice wall styling */
    .audioCard audio{width:100%;margin-top:10px}
    .audioMeta{display:flex;gap:10px;align-items:baseline;flex-wrap:wrap}
    .audioChip{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:var(--muted)}

    /* Marquee / Filmstrip gallery */
    .marquee{
      position:relative;
      overflow:hidden;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.14);
      padding:14px 10px;
    }
    .marquee::before,
    .marquee::after{
      content:"";
      position:absolute;top:0;bottom:0;width:60px;z-index:2;
      pointer-events:none;
    }
    .marquee::before{
      left:0;
      background:linear-gradient(90deg, rgba(10,12,25,.9), rgba(10,12,25,0));
    }
    .marquee::after{
      right:0;
      background:linear-gradient(270deg, rgba(10,12,25,.9), rgba(10,12,25,0));
    }

    .marqueeTrack{
      display:flex;
      gap:14px;
      width:max-content;
      animation: marqueeMove 40s linear infinite;
      will-change: transform;
    }
    @keyframes marqueeMove{
      from{ transform: translateX(0); }
      to{ transform: translateX(-50%); }
    }

    .marqueeImg{
      width:300px;
      height:210px;
      object-fit:cover;
      border-radius:16px;
      border:2px solid rgba(255,255,255,.14);
      box-shadow:0 18px 50px rgba(0,0,0,.35);
      flex:0 0 auto;
      transform: translateZ(0);
      transition: transform .25s;
    }
    .marqueeImg:hover{ transform: scale(1.03); }

    .marquee:hover .marqueeTrack{ animation-play-state: paused; }

    /* Mobile: ·∫£nh nh·ªè h∆°n + ch·∫°y ch·∫≠m h∆°n */
    @media(max-width:600px){
      .marqueeImg{ width:240px; height:170px; }
      .marqueeTrack{ animation-duration: 55s; }
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .marqueeTrack{ animation: none; }
    }

  </style>
</head>
<body>
  <div class="loading" id="loading"><div class="loadingText">üéÇ ƒêang chu·∫©n b·ªã b·∫•t ng·ªù...</div></div>
  <div class="countdown-overlay" id="countdownOverlay"><div class="countdown-number" id="countdownNum">3</div><div class="countdown-text">Chu·∫©n b·ªã ƒë√≥n b·∫•t ng·ªù...</div></div>
  <canvas id="confetti"></canvas>
  <div class="confetti-icon" id="confettiIcon">üéä</div>
  <button class="music-btn" id="musicBtn" title="B·∫≠t nh·∫°c sinh nh·∫≠t">üéµ</button>

  <!-- YouTube Music Modal -->
  <div class="music-modal" id="musicModal">
    <div class="music-modal-content">
      <button class="music-close" id="musicClose">‚úï</button>
      <iframe id="ytPlayer" width="300" height="200" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
  </div>

  <div class="nav"><div class="navIn">
    <div class="brand" id="brand">‚ú® Birthday Spotlight </div>
    <button class="menuToggle" id="menuToggle">‚ò∞</button>
    <div class="links" id="navLinks">
      <a href="#spotlight">Spotlight</a>
      <a href="#awards">D·∫•u ·∫•n</a>
      <a href="#gallery">Gallery</a>
      <a href="#messages">L·ªùi ch√∫c</a>
      <a href="#voice">Voice</a>
      <a href="#scratch">C√†o</a>
      <a href="#slot">Quay s·ªë</a>
      <a href="#finale">Finale</a>
    </div>
    <div class="spacer"></div><button class="btn" id="btnConfetti2">üéä B·∫Øn ph√°o</button>
  </div></div>

  <div class="wrap">
    <section class="grid grid2" id="spotlight" style="margin-top:18px">
      <div class="card hero"><div class="glow"></div><div class="kicker">S·∫æP & TEAM</div>
        <h1 id="title">Happy Birthday, Boss üíñ</h1>
        <p>Ch√∫c s·∫øp tu·ªïi m·ªõi <b>lu√¥n ƒëi·ªÅm tƒ©nh</b>, ti·∫øp t·ª•c <b>th·ª±c thi xu·∫•t s·∫Øc</b>, v√† c√πng team <b>ph√°t tri·ªÉn m·∫°nh m·∫Ω</b>.</p>
        <div class="pillRow"><span class="pill">üëë Spotlight: ON</span><span class="pill">üå∏ Birthday Girl</span><span class="pill">‚ö° Calm ‚Ä¢ Excellence</span></div>
        <hr class="hr"/>
        <div style="display:flex;gap:10px;flex-wrap:wrap"><button class="btn btnPrimary" id="btnBoom">B·∫•m m·ªü b·∫•t ng·ªù</button><button class="btn" id="btnOpenVideo">M·ªü video</button><a class="btn" href="#messages" style="text-decoration:none">Xem l·ªùi ch√∫c</a></div>
        <div class="secret" id="secretNote">ü§´ Secret: "S·∫øp kh√≥ t√≠nh ƒë·ªÉ team gi·ªèi h∆°n ‚Äî c√≤n ngo√†i gi·ªù th√¨ s·∫øp mu·ªën m·ªçi ng∆∞·ªùi vui."</div>
      </div>
      <div class="card"><h2>Spotlight Story</h2>
        <div class="stat"><div class="dot"></div><div><b>ƒêi·ªÅm tƒ©nh trong m·ªçi t√¨nh hu·ªëng</b><p style="margin:6px 0 0">Gi·ªØ v·ªØng nh·ªãp ngay c·∫£ l√∫c "deadline s√°t g√°y".</p></div></div>
        <div class="stat" style="margin-top:12px"><div class="dot"></div><div><b>Th·ª±c thi xu·∫•t s·∫Øc</b><p style="margin:6px 0 0">L√†m t·ªõi n∆°i t·ªõi ch·ªën, ƒë√∫ng chu·∫©n "high standard".</p></div></div>
        <div class="stat" style="margin-top:12px"><div class="dot"></div><div><b>Mong m·ªçi ng∆∞·ªùi c√πng ph√°t tri·ªÉn</b><p style="margin:6px 0 0">Giao ni·ªÅm tin + t·∫°o c∆° h·ªôi + feedback th·∫≥ng nh∆∞ng ·∫•m.</p></div></div>
        <hr class="hr"/><p style="margin:0;font-size:13px">üí° Double-click title ƒë·ªÉ xem secret!</p>
      </div>
    </section>

    <section class="card" id="awards" style="margin-top:14px"><div class="kicker">D·∫§U ·∫§N</div><h2>Awards & Achievements</h2>
      <div class="grid grid3" style="margin-top:12px">
        <div class="msgCard"><div class="who">üèÜ Calm Captain</div><div class="quote">"S·∫øp l√†m team v·ªØng t√¢m nh·∫•t."</div></div>
        <div class="msgCard"><div class="who">üíé Excellence</div><div class="quote">"M·ªói l·∫ßn s·∫øp ch·ªët l√† ƒëi v√†o ƒë∆∞·ªùng ray."</div></div>
        <div class="msgCard"><div class="who">üå± Growth Builder</div><div class="quote">"S·∫øp d·∫´n d·∫Øt c·∫£ d·ª± √°n l·∫´n con ng∆∞·ªùi."</div></div>
      </div>
    </section>

    <section class="card" id="gallery" style="margin-top:14px"><div class="kicker">MOMENTS</div><h2>Kho·∫£nh kh·∫Øc n·ªïi b·∫≠t</h2><p>Nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ üíï</p>
      <div class="marquee" aria-label="·∫¢nh ch·∫°y d·∫°ng d·∫£i bƒÉng">
      <div class="marqueeTrack">
        <!-- set 1 - 7 ·∫£nh -->
        <img src="./anh1.JPG" class="marqueeImg" alt="·∫¢nh 1">
        <img src="./anh2.JPG" class="marqueeImg" alt="·∫¢nh 2">
        <img src="./anh3.jpg" class="marqueeImg" alt="·∫¢nh 3">
        <img src="./anh6.jpg" class="marqueeImg" alt="·∫¢nh 6">
        <img src="./anh7.jpg" class="marqueeImg" alt="·∫¢nh 7">
        <img src="./anh8.jpg" class="marqueeImg" alt="·∫¢nh 8">
        <img src="./anh9.jpg" class="marqueeImg" alt="·∫¢nh 9">

        <!-- set 2 (duplicate ƒë·ªÉ ch·∫°y loop m∆∞·ª£t) -->
        <img src="./anh1.JPG" class="marqueeImg" alt="·∫¢nh 1b">
        <img src="./anh2.JPG" class="marqueeImg" alt="·∫¢nh 2b">
        <img src="./anh3.jpg" class="marqueeImg" alt="·∫¢nh 3b">
        <img src="./anh6.jpg" class="marqueeImg" alt="·∫¢nh 6b">
        <img src="./anh7.jpg" class="marqueeImg" alt="·∫¢nh 7b">
        <img src="./anh8.jpg" class="marqueeImg" alt="·∫¢nh 8b">
        <img src="./anh9.jpg" class="marqueeImg" alt="·∫¢nh 9b">
      </div>
    </div>

    <p style="margin-top:10px;font-size:13px">Tip: Ch·∫°m/hover ƒë·ªÉ t·∫°m d·ª´ng.</p>
    </section>

    <!-- TEXT GUESTBOOK (rendered by JS) -->
    <section class="card" id="messages" style="margin-top:14px">
      <div class="kicker">FROM TEAM</div>
      <h2>L·ªùi ch√∫c t·ª´ team</h2>
      <p style="margin-top:6px">Nh·ªØng l·ªùi ch√∫c ƒë√£ ƒë∆∞·ª£c team ch·ªçn l·ªçc üíñ</p>
      <div class="msgGrid" id="msgGrid" style="margin-top:12px"></div>
    </section>

    <!-- VOICE WALL -->
    <section class="card" id="voice" style="margin-top:14px">
      <div class="kicker">VOICE NOTES</div>
      <h2>üéôÔ∏è L·ªùi ch√∫c b·∫±ng gi·ªçng n√≥i</h2>
      <p>Nh·∫•n play ƒë·ªÉ nghe. (M·ªói voice 10‚Äì20s l√† "ƒë·∫Øt" nh·∫•t)</p>
      <div class="msgGrid" id="voiceGrid" style="margin-top:12px"></div>
      <p style="margin-top:10px;font-size:13px">
        üìÅ G·ª£i √Ω: ƒë·ªÉ file trong <b>./audio/</b> (v√≠ d·ª•: <i>audio/01_member1.mp3</i>)
      </p>
    </section>

    <section class="card" id="scratch" style="margin-top:14px"><div class="kicker">B√ç M·∫¨T</div><h2>üé´ C√†o l·ªô l·ªùi ch√∫c</h2><p>D√πng chu·ªôt c√†o ƒë·ªÉ xem!</p>
      <div class="scratch-container" id="scratchContainer"><div class="scratch-reveal">üéÅ Ch√∫c s·∫øp GI√ÄU - ƒê·∫∏P - KH·ªéE! üíñ</div><canvas class="scratch-canvas" id="scratchCanvas"></canvas></div>
    </section>

    <section class="card" id="slot" style="margin-top:14px"><div class="kicker">V·∫¨N MAY</div><h2>üé∞ Quay s·ªë l·ªùi ch√∫c</h2>
      <div class="slot-machine"><div class="slot-display"><div class="slot-item" id="slot1">üéÇ</div><div class="slot-item" id="slot2">üéÅ</div><div class="slot-item" id="slot3">üéâ</div></div>
        <button class="btn btnPrimary" id="btnSpin">üé∞ Quay ngay!</button><div class="slot-result" id="slotResult">B·∫•m ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c!</div>
      </div>
    </section>

    <section class="card" id="quiz" style="margin-top:14px"><div class="kicker">QUIZ</div><h2>Team hi·ªÉu s·∫øp t·ªõi ƒë√¢u?</h2>
      <div class="q"><b>C√¢u 1:</b> Mood c·ªßa s·∫øp khi cƒÉng?<label class="opt"><input type="radio" name="q1" value="0"> H∆°i g·∫Øt</label><label class="opt"><input type="radio" name="q1" value="1"> ƒêi·ªÅm tƒ©nh</label><label class="opt"><input type="radio" name="q1" value="0"> Im l·∫∑ng</label></div>
      <div class="q"><b>C√¢u 2:</b> S·∫øp mu·ªën team l√†m t·ªët?<label class="opt"><input type="radio" name="q2" value="0"> N√≥i hay</label><label class="opt"><input type="radio" name="q2" value="1"> Th·ª±c thi xu·∫•t s·∫Øc</label><label class="opt"><input type="radio" name="q2" value="0"> Reply nhanh</label></div>
      <div class="q"><b>C√¢u 3:</b> Signature c·ªßa s·∫øp?<label class="opt"><input type="radio" name="q3" value="1"> Chu·∫©n cao + h·ªó tr·ª£</label><label class="opt"><input type="radio" name="q3" value="0"> Vui t√≠nh</label><label class="opt"><input type="radio" name="q3" value="0"> Kh√¥ng feedback</label></div>
      <button class="btn btnPrimary" id="btnCheck">Ch·∫•m ƒëi·ªÉm</button><div class="result" id="quizResult"></div>
    </section>

    <section class="card" id="finale" style="margin-top:14px"><div class="kicker">FINALE</div><h2>L·ªùi k·∫øt</h2>
      <p style="font-size:18px;color:var(--text)">Ch√∫c s·∫øp tu·ªïi m·ªõi th·∫≠t nhi·ªÅu nƒÉng l∆∞·ª£ng v√† lu√¥n r·ª±c r·ª°! üíñ</p>
      <div style="display:flex;gap:10px;margin-top:16px"><button class="btn btnPrimary" id="btnConfetti">üéâ B·∫Øn ph√°o</button><a class="btn" href="#spotlight" style="text-decoration:none">‚¨ÜÔ∏è L√™n ƒë·∫ßu</a></div>
    </section>
  </div>

  <div class="backdrop" id="backdrop"><div class="modal"><div class="modalTop"><b>üé¨ Video b·∫•t ng·ªù</b><button class="btn closeX" id="btnClose">‚úï</button></div><div class="modalBody"><div class="videoBox">VIDEO PLACEHOLDER</div></div></div></div>

  <script>
    const isCoarse = window.matchMedia && window.matchMedia("(pointer: coarse)").matches;

    // COUNTDOWN
    let count=3;const countdownOverlay=document.getElementById('countdownOverlay'),countdownNum=document.getElementById('countdownNum');
    function startCountdown(){document.getElementById('loading').classList.add('hide');const i=setInterval(()=>{count--;if(count>0){countdownNum.style.animation='none';countdownNum.offsetHeight;countdownNum.style.animation='countPop 0.5s';countdownNum.textContent=count}else if(count===0){countdownNum.textContent='üéâ';countdownNum.style.fontSize='120px'}else{clearInterval(i);countdownOverlay.classList.add('hide');setTimeout(boom,300);startBalloons()}},800)}
    window.addEventListener('load',()=>setTimeout(startCountdown,500));

    // MENU
    document.getElementById('menuToggle').onclick=()=>document.getElementById('navLinks').classList.toggle('show');

    // CONFETTI
    const canvas=document.getElementById('confetti'),ctx=canvas.getContext('2d');let W,H,parts=[],running=false;
    function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}addEventListener('resize',resize);resize();
    function spawn(n=220){const colors=['#ffb3c8','#ffd6a5','#cdb4ff','#a7f3d0','#fbbf24','#f472b6'];for(let i=0;i<n;i++)parts.push({x:Math.random()*W,y:-20-Math.random()*H*.25,vx:(Math.random()-.5)*2.2,vy:2.8+Math.random()*5.2,s:4+Math.random()*7,r:Math.random()*Math.PI,vr:(Math.random()-.5)*.22,a:1,color:colors[Math.floor(Math.random()*colors.length)]});running=true}
    function tick(){if(!running)return;ctx.clearRect(0,0,W,H);parts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.r+=p.vr;p.vy*=.995;p.vy+=.03;p.a*=.998;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);ctx.globalAlpha=Math.max(0,p.a);ctx.fillStyle=p.color;ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s*.72);ctx.restore()});parts=parts.filter(p=>p.y<H+50&&p.a>.06);if(parts.length===0)running=false;requestAnimationFrame(tick)}
    function boom(){spawn(280);tick()}
    document.getElementById('btnBoom').onclick=boom;document.getElementById('btnConfetti').onclick=boom;document.getElementById('btnConfetti2').onclick=boom;

    // CONFETTI ICON ROTATION (skip on mobile)
    const confettiIcon=document.getElementById('confettiIcon');
    if(!isCoarse){
      document.addEventListener('mousemove',e=>{const r=confettiIcon.getBoundingClientRect(),dx=e.clientX-(r.left+r.width/2),dy=e.clientY-(r.top+r.height/2),angle=Math.atan2(dy,dx)*(180/Math.PI);confettiIcon.style.transform=`rotate(${angle-90}deg)`});
    }
    confettiIcon.onclick=boom;

    // SPARKLE (skip on mobile)
    const sparkles=['‚ú®','‚≠ê','üí´','üåü'];let sparkleT=0;
    if(!isCoarse){
      document.addEventListener('mousemove',e=>{if(Date.now()-sparkleT<80||Math.random()>.4)return;sparkleT=Date.now();const s=document.createElement('div');s.className='sparkle';s.textContent=sparkles[Math.floor(Math.random()*sparkles.length)];s.style.left=(e.clientX-10)+'px';s.style.top=(e.clientY-10)+'px';document.body.appendChild(s);setTimeout(()=>s.remove(),800)});
    }

    // BALLOONS
    const balloons=['üéà','ü©∑','üíú','üíõ','ü©µ'];
    function createBalloon(){const b=document.createElement('div');b.className='balloon';b.textContent=balloons[Math.floor(Math.random()*balloons.length)];b.style.left=Math.random()*(innerWidth-50)+'px';b.style.animationDuration=(5+Math.random()*4)+'s';document.body.appendChild(b);setTimeout(()=>b.remove(),10000)}
    function startBalloons(){for(let i=0;i<10;i++)setTimeout(createBalloon,i*300);setInterval(createBalloon,3000)}

    // FLOATING HEARTS
    document.addEventListener('click',e=>{if(['BUTTON','INPUT','A'].includes(e.target.tagName))return;const hearts=['üíñ','üíï','üíó','ü©∑'];for(let i=0;i<3;i++)setTimeout(()=>{const h=document.createElement('div');h.className='floating-heart';h.textContent=hearts[Math.floor(Math.random()*hearts.length)];h.style.left=(e.clientX-14)+'px';h.style.top=(e.clientY-14)+'px';document.body.appendChild(h);setTimeout(()=>h.remove(),1500)},i*100)});

    // FIREWORK ON CARD
    document.querySelectorAll('.card').forEach(c=>c.addEventListener('click',e=>{if(['BUTTON','INPUT'].includes(e.target.tagName))return;const colors=['#ffb3c8','#ffd6a5','#cdb4ff','#a7f3d0'];for(let i=0;i<12;i++){const f=document.createElement('div');f.className='firework';f.style.left=e.clientX+'px';f.style.top=e.clientY+'px';f.style.background=colors[Math.floor(Math.random()*colors.length)];const angle=(i/12)*Math.PI*2,dist=50+Math.random()*50;f.style.setProperty('--tx',Math.cos(angle)*dist+'px');f.style.setProperty('--ty',Math.sin(angle)*dist+'px');document.body.appendChild(f);setTimeout(()=>f.remove(),800)}}));

    // MUSIC - YouTube Embed
    const musicBtn=document.getElementById('musicBtn');
    const musicModal=document.getElementById('musicModal');
    const musicClose=document.getElementById('musicClose');
    const ytPlayer=document.getElementById('ytPlayer');

    // YouTube video ID - Happy Birthday Piano
    const youtubeVideoId='Uc7DfbBcfvk';

    let musicOpen=false;
    musicBtn.onclick=()=>{
      if(!musicOpen){
        ytPlayer.src=`https://www.youtube.com/embed/${youtubeVideoId}?autoplay=1&loop=1&playlist=${youtubeVideoId}`;
        musicModal.classList.add('show');
        musicBtn.textContent='üîä';
        musicBtn.classList.add('playing');
      }else{
        ytPlayer.src='';
        musicModal.classList.remove('show');
        musicBtn.textContent='üéµ';
        musicBtn.classList.remove('playing');
      }
      musicOpen=!musicOpen;
    };

    musicClose.onclick=()=>{
      ytPlayer.src='';
      musicModal.classList.remove('show');
      musicBtn.textContent='üéµ';
      musicBtn.classList.remove('playing');
      musicOpen=false;
    };

    // SCRATCH CARD - Fixed version
    const scratchCanvas=document.getElementById('scratchCanvas');
    const scratchCtx=scratchCanvas.getContext('2d');
    const scratchContainer=document.getElementById('scratchContainer');
    let isScratching=false;
    let scratchReady=false;

    function initScratch(){
      const rect=scratchContainer.getBoundingClientRect();
      if(rect.width===0||rect.height===0)return;

      scratchCanvas.width=rect.width;
      scratchCanvas.height=rect.height;

      scratchCtx.globalCompositeOperation='source-over';

      const gradient=scratchCtx.createLinearGradient(0,0,rect.width,rect.height);
      gradient.addColorStop(0,'#ffb3c8');
      gradient.addColorStop(0.5,'#cdb4ff');
      gradient.addColorStop(1,'#ffd6a5');
      scratchCtx.fillStyle=gradient;
      scratchCtx.fillRect(0,0,rect.width,rect.height);

      scratchCtx.fillStyle='rgba(255,255,255,0.95)';
      scratchCtx.font='bold 20px system-ui';
      scratchCtx.textAlign='center';
      scratchCtx.textBaseline='middle';
      scratchCtx.fillText('üéÅ C√†o t·∫°i ƒë√¢y ƒë·ªÉ xem!',rect.width/2,rect.height/2);

      scratchReady=true;
    }

    function doScratch(x,y){
      if(!scratchReady)return;
      scratchCtx.globalCompositeOperation='destination-out';
      scratchCtx.beginPath();
      scratchCtx.arc(x,y,30,0,Math.PI*2);
      scratchCtx.fill();
    }

    function handleScratch(e){
      if(!isScratching)return;
      e.preventDefault();
      const rect=scratchCanvas.getBoundingClientRect();
      let x,y;
      if(e.touches){
        x=e.touches[0].clientX-rect.left;
        y=e.touches[0].clientY-rect.top;
      }else{
        x=e.clientX-rect.left;
        y=e.clientY-rect.top;
      }
      doScratch(x,y);
    }

    scratchCanvas.addEventListener('mousedown',e=>{isScratching=true;handleScratch(e)});
    scratchCanvas.addEventListener('mouseup',()=>isScratching=false);
    scratchCanvas.addEventListener('mouseleave',()=>isScratching=false);
    scratchCanvas.addEventListener('mousemove',handleScratch);

    scratchCanvas.addEventListener('touchstart',e=>{isScratching=true;handleScratch(e)},{passive:false});
    scratchCanvas.addEventListener('touchend',()=>isScratching=false);
    scratchCanvas.addEventListener('touchmove',handleScratch,{passive:false});

    window.addEventListener('load',()=>setTimeout(initScratch,500));
    window.addEventListener('resize',()=>{scratchReady=false;setTimeout(initScratch,100)});

    // SLOT
    const slotEmojis=['üéÇ','üéÅ','üéâ','üéà','üíñ','‚≠ê','üéä','üíé'],slotMsgs=['üî• JACKPOT! Ch√∫c s·∫øp GI√ÄU S·ª§!','‚ú® Ch√∫c s·∫øp T·ªéA S√ÅNG!','üíñ Ch√∫c s·∫øp ƒë∆∞·ª£c Y√äU TH∆Ø∆†NG!','üéØ Ch√∫c s·∫øp ƒê·∫†T M·ªåI M·ª§C TI√äU!','üí™ Ch√∫c s·∫øp S·ª®C KH·ªéE d·ªìi d√†o!','üöÄ Ch√∫c s·∫øp THƒÇNG TI·∫æN!','üòÑ Ch√∫c s·∫øp H·∫†NH PH√öC!','üëë Ch√∫c s·∫øp lu√¥n l√† QUEEN!'];
    const slot1=document.getElementById('slot1'),slot2=document.getElementById('slot2'),slot3=document.getElementById('slot3'),slotResult=document.getElementById('slotResult');let isSpinning=false;
    document.getElementById('btnSpin').onclick=()=>{if(isSpinning)return;isSpinning=true;slot1.classList.add('spinning');slot2.classList.add('spinning');slot3.classList.add('spinning');slotResult.textContent='üé∞ ƒêang quay...';
    const spin=setInterval(()=>{slot1.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slot2.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slot3.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},100);
    setTimeout(()=>{slot1.classList.remove('spinning');slot1.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},1000);
    setTimeout(()=>{slot2.classList.remove('spinning');slot2.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},1500);
    setTimeout(()=>{clearInterval(spin);slot3.classList.remove('spinning');slot3.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slotResult.textContent=slotMsgs[Math.floor(Math.random()*slotMsgs.length)];boom();isSpinning=false},2000)};

    // VIDEO MODAL
    const backdrop=document.getElementById('backdrop');document.getElementById('btnOpenVideo').onclick=()=>backdrop.style.display='flex';document.getElementById('btnClose').onclick=()=>backdrop.style.display='none';backdrop.onclick=e=>{if(e.target===backdrop)backdrop.style.display='none'};

    // SECRET
    const secret=document.getElementById('secretNote');document.getElementById('title').ondblclick=()=>secret.style.display=secret.style.display==='block'?'none':'block';document.getElementById('brand').ondblclick=()=>secret.style.display=secret.style.display==='block'?'none':'block';

    // QUIZ
    document.getElementById('btnCheck').onclick=()=>{const pick=n=>{const el=document.querySelector(`input[name="${n}"]:checked`);return el?Number(el.value):null};const a=pick('q1'),b=pick('q2'),c=pick('q3'),res=document.getElementById('quizResult');if(a===null||b===null||c===null){res.style.display='block';res.textContent='Ch·ªçn ƒë·ªß 3 c√¢u nha üòÑ';return}const score=a+b+c;res.style.display='block';if(score===3){res.textContent='üî• 3/3! Team hi·ªÉu s·∫øp qu√° chu·∫©n!';boom()}else if(score===2)res.textContent='‚ú® 2/3! Kh√° ƒë√∫ng vibe!';else res.textContent='üòÑ 0‚Äì1/3! Quan tr·ªçng l√† ch√¢n th√†nh!'};

    // DATA-DRIVEN TEXT GUESTBOOK
    const messages = [
      { name: "Member 1", tag: "Ch√¢n th√†nh", text: "Ch√∫c s·∫øp tu·ªïi m·ªõi nhi·ªÅu s·ª©c kh·ªèe!" },
      { name: "Member 2", tag: "T√¥n vinh", text: "C·∫£m ∆°n s·∫øp lu√¥n t·∫°o kh√¥ng gian ti·∫øn b·ªô." },
      { name: "Member 3", tag: "Vui nh·∫π", text: "Patch note: +1 tu·ªïi, +100% th·∫ßn th√°i ‚ú®" },
      { name: "Member 4", tag: "Sang", text: "Leadership = caring + competence." },
      { name: "Member 5", tag: "Vui nh·∫π", text: "Ch√∫c s·∫øp √≠t meeting, nhi·ªÅu coffee! üòÑ" },
      { name: "Member 6", tag: "Ch√¢n th√†nh", text: "Ch√∫c s·∫øp ƒë·∫°t m·ªçi m·ª•c ti√™u!" },
      // TODO: th√™m l·ªùi ch√∫c ·ªü ƒë√¢y
    ];

    const msgGrid = document.getElementById("msgGrid");
    if (msgGrid) {
      msgGrid.innerHTML = messages.map(m => `
        <div class="msgCard">
          <div class="who">${m.name}</div>
          ${m.tag ? `<div class="tag">${m.tag}</div>` : ``}
          <div class="quote">"${m.text}"</div>
        </div>
      `).join("");
    }

    // VOICE WALL (host audio files in ./audio/)
    const voiceNotes = [
      { name: "Member 1", tag: "Warm", src: "./audio/01_member1.mp3", text: "Ch√∫c s·∫øp lu√¥n r·ª±c r·ª° üíñ" },
      { name: "Member 2", tag: "Sang", src: "./audio/02_member2.mp3", text: "C·∫£m ∆°n s·∫øp v√¨ lu√¥n l·∫Øng nghe v√† d·∫´n d·∫Øt." },
      // TODO: th√™m voice ·ªü ƒë√¢y
    ];

    const voiceGrid = document.getElementById("voiceGrid");
    if (voiceGrid) {
      voiceGrid.innerHTML = voiceNotes.map(v => `
        <div class="msgCard audioCard">
          <div class="audioMeta">
            <div class="who">${v.name}</div>
            <span class="audioChip">${v.tag ?? "Voice"}</span>
          </div>
          ${v.text ? `<div class="quote">"${v.text}"</div>` : ``}
          <audio controls preload="none">
            <source src="${v.src}" type="audio/mpeg">
            Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ audio.
          </audio>
        </div>
      `).join("");

      // play 1 c√°i th√¨ pause c√°c c√°i kh√°c
      voiceGrid.querySelectorAll("audio").forEach(a => {
        a.addEventListener("play", () => {
          voiceGrid.querySelectorAll("audio").forEach(b => { if (b !== a) b.pause(); });
        });
      });
    }
  </script>
</body>
</html>


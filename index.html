<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday, Jenny ‚ú®</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÇ</text></svg>">
  <style>
    :root{--bg1:#0b1020;--bg2:#1a0f2b;--card:rgba(255,255,255,.08);--text:rgba(255,255,255,.92);--muted:rgba(255,255,255,.72);--accent1:#ffb3c8;--accent2:#ffd6a5;--accent3:#cdb4ff}
    *{box-sizing:border-box}html{scroll-behavior:smooth}html,body{height:100%}
    body{margin:0;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:radial-gradient(1200px 700px at 20% 10%,rgba(255,179,200,.20),transparent 55%),radial-gradient(900px 700px at 90% 25%,rgba(205,180,255,.18),transparent 52%),radial-gradient(1100px 700px at 50% 110%,rgba(255,214,165,.12),transparent 55%),linear-gradient(180deg,var(--bg1),var(--bg2));overflow-x:hidden}
    a{color:inherit}.wrap{max-width:1120px;margin:0 auto;padding:24px 18px 80px}
    .nav{position:sticky;top:0;z-index:10;backdrop-filter:blur(10px);background:rgba(10,12,25,.55);border-bottom:1px solid rgba(255,255,255,.08)}
    .navIn{max-width:1120px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;cursor:pointer}
    .links{display:flex;gap:10px;flex-wrap:wrap}.links a{text-decoration:none;font-size:13px;color:var(--muted);padding:8px 10px;border-radius:12px}
    .spacer{flex:1}.btn{border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:var(--text);padding:10px 12px;border-radius:14px;font-weight:750;cursor:pointer;transition:all 0.2s}
    .btnPrimary{background:linear-gradient(135deg,rgba(255,179,200,.95),rgba(255,214,165,.90));color:#12131a;border:none;box-shadow:0 16px 40px rgba(0,0,0,.35)}
    .grid{display:grid;gap:14px}.grid2{grid-template-columns:1.2fr .8fr}.grid3{grid-template-columns:repeat(3,1fr)}
    @media(max-width:900px){.grid2,.grid3{grid-template-columns:1fr}.links{display:none}h1{font-size:32px!important}.menuToggle{display:block!important}}
    .menuToggle{display:none;background:transparent;border:1px solid rgba(255,255,255,.18);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.12);border-radius:22px;padding:18px;box-shadow:0 22px 70px rgba(0,0,0,.35)}
    .kicker{color:var(--muted);font-size:13px;letter-spacing:.18em;text-transform:uppercase}
    h1{margin:10px 0 8px;font-size:44px;line-height:1.05}h2{margin:0 0 10px;font-size:26px}p{margin:8px 0;color:var(--muted);line-height:1.6}
    .hr{height:1px;background:rgba(255,255,255,.10);margin:14px 0;border:0}
    .hero{padding:26px;position:relative;overflow:hidden}
    .glow{position:absolute;inset:-120px -120px auto auto;width:520px;height:520px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,179,200,.35),transparent 55%);pointer-events:none;animation:pulse 4s ease-in-out infinite}
    @keyframes pulse{0%,100%{opacity:0.8;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}
    .pillRow{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .pill{font-size:12px;padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(0,0,0,.18);color:rgba(255,255,255,.78)}
    .stat{display:flex;gap:12px;padding:14px;border-radius:18px;border:1px solid rgba(255,255,255,.10);background:rgba(0,0,0,.18);transition:transform 0.2s}
    .stat:hover{transform:translateX(4px)}.dot{width:11px;height:11px;border-radius:50%;background:linear-gradient(135deg,var(--accent1),var(--accent2));margin-top:6px}
    .msgGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}@media(max-width:900px){.msgGrid{grid-template-columns:1fr}}
    .msgCard{border-radius:18px;padding:14px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.16);transition:transform 0.2s}
    .msgCard:hover{transform:translateY(-4px)}.who{font-weight:800}.tag{font-size:12px;color:var(--muted)}.quote{margin-top:8px;color:rgba(255,255,255,.78)}
    canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:100}
    .confetti-icon{position:fixed;bottom:30px;left:30px;font-size:55px;z-index:99;cursor:pointer;filter:drop-shadow(0 8px 20px rgba(0,0,0,.4));transition:transform 0.1s}
    .sparkle{position:fixed;pointer-events:none;font-size:20px;z-index:98;animation:sparkleAnim 0.8s forwards}
    @keyframes sparkleAnim{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0) translateY(-30px)}}
    .balloon{position:fixed;bottom:-100px;font-size:45px;z-index:97;animation:floatUp 6s forwards;pointer-events:none}
    @keyframes floatUp{0%{bottom:-100px}100%{bottom:110vh;opacity:0}}
    .floating-heart{position:fixed;font-size:28px;z-index:98;pointer-events:none;animation:heartFloat 1.5s forwards}
    @keyframes heartFloat{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-100px)}}
    .music-btn{position:fixed;bottom:30px;right:30px;width:50px;height:50px;border-radius:50%;border:2px solid rgba(255,255,255,.2);background:rgba(255,255,255,.1);color:#fff;font-size:22px;cursor:pointer;z-index:99;display:flex;align-items:center;justify-content:center}
    .music-btn:hover{background:rgba(255,255,255,.2);transform:scale(1.1)}
    .music-btn.playing{animation:pulse-music 1s infinite;border-color:var(--accent1)}
    @keyframes pulse-music{0%,100%{box-shadow:0 0 0 0 rgba(255,179,200,.4)}50%{box-shadow:0 0 0 15px rgba(255,179,200,0)}}
    .music-modal{display:none;position:fixed;bottom:100px;right:30px;z-index:99}
    .music-modal.show{display:block}
    .music-modal-content{background:rgba(15,16,26,.95);border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:12px;box-shadow:0 20px 60px rgba(0,0,0,.5)}
    .music-close{position:absolute;top:-10px;right:-10px;width:28px;height:28px;border-radius:50%;border:none;background:var(--accent1);color:#000;font-weight:bold;cursor:pointer;font-size:14px}
    .countdown-overlay{position:fixed;inset:0;background:var(--bg1);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:300;transition:opacity 0.5s}
    .countdown-overlay.hide{opacity:0;pointer-events:none}
    .countdown-number{font-size:150px;font-weight:900;background:linear-gradient(135deg,var(--accent1),var(--accent2),var(--accent3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:countPop 0.5s}
    .countdown-text{font-size:24px;color:var(--muted);margin-top:20px}@keyframes countPop{0%{transform:scale(0.5);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1)}}
    .scratch-container{position:relative;width:100%;max-width:400px;height:120px;margin:16px auto 0;border-radius:16px;overflow:hidden;cursor:crosshair}
    .scratch-reveal{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:16px;font-size:18px;font-weight:700;background:linear-gradient(135deg,rgba(255,179,200,.2),rgba(205,180,255,.2));border:2px solid rgba(255,255,255,.2);border-radius:16px}
    .scratch-canvas{position:absolute;inset:0;border-radius:16px;cursor:crosshair;touch-action:none}
    .slot-machine{background:rgba(0,0,0,.3);border:2px solid rgba(255,255,255,.15);border-radius:18px;padding:20px;text-align:center;margin-top:16px}
    .slot-display{display:flex;justify-content:center;gap:10px;margin:16px 0}
    .slot-item{width:80px;height:80px;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.2);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:40px}
    .slot-item.spinning{animation:slotSpin 0.1s infinite}@keyframes slotSpin{0%{transform:translateY(-5px)}50%{transform:translateY(5px)}100%{transform:translateY(-5px)}}
    .slot-result{min-height:50px;padding:12px;border-radius:12px;background:rgba(255,255,255,.05);margin-top:12px;color:var(--muted)}
    .firework{position:fixed;width:8px;height:8px;border-radius:50%;pointer-events:none;z-index:101;animation:fireworkBurst 0.8s forwards}
    @keyframes fireworkBurst{0%{transform:translate(0,0);opacity:1}100%{transform:translate(var(--tx),var(--ty));opacity:0}}
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.62);display:none;align-items:center;justify-content:center;padding:18px;z-index:50}
    .modal{width:min(960px,100%);border-radius:22px;border:1px solid rgba(255,255,255,.16);background:rgba(15,16,26,.88);backdrop-filter:blur(10px);overflow:hidden}
    .modalTop{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.10)}.closeX{margin-left:auto}
    .modalBody{padding:14px}.videoBox{width:100%;aspect-ratio:16/9;border-radius:16px;border:1px dashed rgba(255,255,255,.22);display:grid;place-items:center;color:rgba(255,255,255,.70);background:rgba(0,0,0,.18)}
    .secret{display:none;margin-top:12px;padding:12px 14px;border-radius:16px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06)}
    .q{padding:14px;border-radius:18px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.16);margin-top:12px}
    .opt{display:block;margin-top:10px;cursor:pointer}.result{display:none;margin-top:12px;padding:12px 14px;border-radius:16px;border:1px solid rgba(167,243,208,.35);background:rgba(167,243,208,.10)}
    .loading{position:fixed;inset:0;background:var(--bg1);display:flex;align-items:center;justify-content:center;z-index:200;transition:opacity 0.5s}.loading.hide{opacity:0;pointer-events:none}
    .loadingText{font-size:24px;font-weight:800;animation:blink 1s infinite}@keyframes blink{0%,100%{opacity:1}50%{opacity:0.5}}
    @media(max-width:900px){.links.show{display:flex !important;width:100%;flex-direction:column;gap:6px;padding:10px 0 2px;}.links.show a{border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.12);}}
    .audioCard audio{width:100%;margin-top:10px}
    .marquee{position:relative;overflow:hidden;border-radius:18px;border:1px solid rgba(255,255,255,.14);background:rgba(0,0,0,.14);padding:14px 10px;}
    .marquee::before,.marquee::after{content:"";position:absolute;top:0;bottom:0;width:60px;z-index:2;pointer-events:none;}
    .marquee::before{left:0;background:linear-gradient(90deg, rgba(10,12,25,.9), rgba(10,12,25,0));}
    .marquee::after{right:0;background:linear-gradient(270deg, rgba(10,12,25,.9), rgba(10,12,25,0));}
    .marqueeTrack{display:flex;gap:14px;width:max-content;animation: marqueeMove 40s linear infinite;will-change: transform;}
    @keyframes marqueeMove{from{ transform: translateX(0); }to{ transform: translateX(-50%); }}
    .marqueeImg{width:300px;height:210px;object-fit:cover;border-radius:16px;border:2px solid rgba(255,255,255,.14);box-shadow:0 18px 50px rgba(0,0,0,.35);flex:0 0 auto;transform: translateZ(0);transition: transform .25s;}
    .marqueeImg:hover{ transform: scale(1.03); }
    .marquee:hover .marqueeTrack{ animation-play-state: paused; }
    @media(max-width:600px){.marqueeImg{ width:240px; height:170px; }.marqueeTrack{ animation-duration: 55s; }}
    .highlight-box{background:linear-gradient(135deg,rgba(255,179,200,.15),rgba(205,180,255,.15));border:1px solid rgba(255,255,255,.2);border-radius:16px;padding:16px;margin-top:16px}

    /* ===== Kalimba ===== */
    .kalimbaWrap{border:1px solid rgba(255,255,255,.14);background:rgba(0,0,0,.14);border-radius:18px;padding:14px;}
    .kalimbaTop{display:grid;grid-template-columns:1.2fr .8fr;gap:12px;}
    @media(max-width:900px){.kalimbaTop{grid-template-columns:1fr;}}
    .kalimbaHint{border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.12);border-radius:16px;padding:12px;color:rgba(255,255,255,.85);}
    .songLine{font-size:16px;margin-top:6px;letter-spacing:.08em;}
    .songNote{font-size:12px;color:rgba(255,255,255,.7);}
    .kalimbaNow{border:1px solid rgba(255,255,255,.12);background:linear-gradient(135deg,rgba(255,179,200,.12),rgba(205,180,255,.12));border-radius:16px;padding:12px;}
    .nowTitle{font-size:12px;color:rgba(255,255,255,.75);letter-spacing:.12em;text-transform:uppercase}
    .nowKey{font-size:34px;font-weight:900;margin-top:6px}
    .nowSub{font-size:12px;color:rgba(255,255,255,.72);margin-top:4px}

    .kalimbaBoard{margin-top:12px;display:flex;justify-content:center;align-items:flex-end;gap:8px;flex-wrap:nowrap;overflow-x:auto;padding:18px 6px 6px;-webkit-overflow-scrolling:touch;position:relative;}
    .kalimbaBoard::before{content:"";position:absolute;left:0;right:0;bottom:0;height:10px;background:rgba(255,255,255,.06);border-radius:999px;pointer-events:none;}

    .kKey{position:relative;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:rgba(255,255,255,.9);border-radius:14px;width:48px;min-width:48px;cursor:pointer;user-select:none;touch-action:manipulation;box-shadow:0 16px 40px rgba(0,0,0,.25);transition:transform .08s, background .2s, border-color .2s, box-shadow .2s;display:flex;align-items:flex-end;justify-content:center;padding:10px 6px;transform: translateY(var(--drop, 0px));}
    .kKey:active{transform:translateY(calc(var(--drop, 0px) + 2px)) scale(.99);}
    
    /* --- Kalimba mobile helpers --- */
    /* --- Kalimba sizing for phones --- */
    @media(max-width:600px){
      .kalimbaWrap{padding:12px}
      .kalimbaHint,.kalimbaNow{padding:10px}
      .nowKey{font-size:28px}
      .songLine{font-size:14px}
      .kKey{width:42px;padding:8px 5px;border-radius:14px}
      .kLabel{font-size:12px}
      .kSub{font-size:9.5px;margin-top:3px}
      .kalimbaBoard{padding:14px 6px 6px;gap:7px}
    }
    @media(max-width:380px){
      .kKey{width:38px;padding:7px 4px}
      .kLabel{font-size:11px}
      .kSub{font-size:9px}
    }

    /* --- "Xoay ngang" ngay trong web (kh√¥ng ph·ª• thu·ªôc auto-rotate c·ªßa m√°y) --- */
    .kalimbaStage{display:flex;align-items:center;justify-content:center;overflow:hidden}
    .kalimbaFullscreen.landscape .kalimbaStage{padding:6px 0}
    .kalimbaFullscreen.landscape #kalimbaBoardFull{transform:rotate(90deg) scale(.92);transform-origin:center;}
    .kalimbaFullscreen.landscape .kalimbaSwipeHint{display:none}

    .kalimbaSwipeHint{margin-top:10px;font-size:12px;color:rgba(255,255,255,.72);display:flex;gap:8px;align-items:flex-start}
    .kalimbaSwipeHint .swipeIcon{font-size:16px;line-height:1;opacity:.95}
    .kalimbaSwipeHint b{color:rgba(255,255,255,.88)}
    .noScroll{overflow:hidden}

    .kalimbaFullscreen{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;z-index:420;padding:14px}
    .kalimbaFullscreen.show{display:flex}
    .kalimbaFullscreenCard{width:min(980px,100%);background:rgba(15,16,26,.92);border:1px solid rgba(255,255,255,.16);border-radius:22px;box-shadow:0 26px 90px rgba(0,0,0,.6);overflow:hidden}
    .kalimbaFullscreenTop{display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.10)}
    .kalimbaFullscreenTop .tip{font-size:12px;color:rgba(255,255,255,.70)}
    .kalimbaFullscreenBody{padding:14px}
    .kalimbaFullscreenBody .kalimbaBoard{margin-top:0}
    @media(max-width:600px){
      .kalimbaFullscreenCard{height:92vh;display:flex;flex-direction:column}
      .kalimbaFullscreenBody{flex:1;overflow:auto}
    }
.kKey::after{content:"";position:absolute;left:10px;right:10px;top:14px;height:2px;background:rgba(255,255,255,.08);border-radius:999px;pointer-events:none;}

    .kKey .kLabel{font-weight:900;font-size:14px;line-height:1.1;text-align:center;}
    .kKey .kSub{display:block;margin-top:4px;font-size:11px;color:rgba(255,255,255,.72);font-weight:700;}

    .kKey.guide{border-color: rgba(255,214,165,.7);background: rgba(255,214,165,.14);box-shadow:0 0 0 4px rgba(255,214,165,.10), 0 18px 60px rgba(0,0,0,.35);}
    .kKey.wrong{animation: kShake .22s;border-color: rgba(244,114,182,.75);}
    @keyframes kShake{0%{transform:translateY(var(--drop, 0px)) translateX(0)}25%{transform:translateY(var(--drop, 0px)) translateX(-3px)}50%{transform:translateY(var(--drop, 0px)) translateX(3px)}100%{transform:translateY(var(--drop, 0px)) translateX(0)}}
    @media(max-width:600px){.kKey{width:50px;min-width:50px}.songLine{font-size:15px}.nowKey{font-size:30px}}
    @media (prefers-reduced-motion: reduce){.kKey.wrong{animation:none}}

  </style>
</head>
<body>
  <div class="loading" id="loading"><div class="loadingText">üéÇ ƒêang chu·∫©n b·ªã b·∫•t ng·ªù...</div></div>
  <div class="countdown-overlay" id="countdownOverlay"><div class="countdown-number" id="countdownNum">3</div><div class="countdown-text">Chu·∫©n b·ªã ƒë√≥n b·∫•t ng·ªù...</div></div>
  <canvas id="confetti"></canvas>
  <div class="confetti-icon" id="confettiIcon">üéä</div>
  <button class="music-btn" id="musicBtn" title="B·∫≠t nh·∫°c sinh nh·∫≠t">üéµ</button>
  <div class="music-modal" id="musicModal"><div class="music-modal-content"><button class="music-close" id="musicClose">‚úï</button><iframe id="ytPlayer" width="300" height="200" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div></div>
  <div class="nav"><div class="navIn">
    <div class="brand" id="brand">‚ú® Birthday Spotlight</div>
    <button class="menuToggle" id="menuToggle">‚ò∞</button>
    <div class="links" id="navLinks"><a href="#spotlight">Spotlight</a><a href="#awards">D·∫•u ·∫•n</a><a href="#gallery">Gallery</a><a href="#messages">L·ªùi ch√∫c</a><a href="#voice">Voice</a><a href="#kalimba">Kalimba</a><a href="#scratch">C√†o</a><a href="#slot">Quay s·ªë</a><a href="#finale">Finale</a></div>
    <div class="spacer"></div><button class="btn" id="btnConfetti2">üéä B·∫Øn ph√°o</button>
  </div></div>
  <div class="wrap">
    <section class="grid grid2" id="spotlight" style="margin-top:18px">
      <div class="card hero"><div class="glow"></div><div class="kicker">JENNY & TEAM</div>
        <h1 id="title">Welcome Jenny to the world of love! üéÇ</h1>
        <p><b>Ch√∫c Jenny b∆∞·ªõc sang tu·ªïi m·ªõi:</b></p>
        <p>‚ú® C√≥ nhi·ªÅu tr·∫£i nghi·ªám th√∫ v·ªã ·ªü nh·ªØng mi·ªÅn ƒë·∫•t m·ªõi, g·∫∑p th√™m nhi·ªÅu ng∆∞·ªùi d·ªÖ th∆∞∆°ng, d·ªÖ m·∫øn v√† nhi·ªÅu nƒÉng l∆∞·ª£ng t√≠ch c·ª±c</p>
        <p>‚ú® G·∫∑p nh·ªØng ƒëi·ªÅu t·ª≠ t·∫ø su·ªët c·∫£ nƒÉm, m·ªói ng√†y, m·ªói gi·ªù.</p>
        <div class="pillRow"><span class="pill">üëë Spotlight: ON</span><span class="pill">üå∏ Birthday Girl</span><span class="pill">üíñ World of Love</span></div>
        <hr class="hr"/>
        <div style="display:flex;gap:10px;flex-wrap:wrap"><button class="btn btnPrimary" id="btnBoom">B·∫•m m·ªü b·∫•t ng·ªù</button><button class="btn" id="btnOpenVideo">M·ªü video</button><a class="btn" href="#messages" style="text-decoration:none">Xem l·ªùi ch√∫c</a></div>
        <div class="secret" id="secretNote">ü§´ Secret: "Jenny kh√≥ t√≠nh ƒë·ªÉ team gi·ªèi h∆°n ‚Äî c√≤n ngo√†i gi·ªù th√¨ Jenny mu·ªën m·ªçi ng∆∞·ªùi vui."</div>
      </div>
      <div class="card"><h2>Spotlight Story</h2>
        <div class="stat"><div class="dot"></div><div><b>üó£Ô∏è Kh√¥ng c·∫ßn n√≥i nhi·ªÅu‚Ä¶</b><p style="margin:6px 0 0">Nh∆∞ng m·ªói l·∫ßn l√™n ti·∫øng l√† m·ªçi ng∆∞·ªùi ƒë·ªÅu l·∫Øng nghe.</p></div></div>
        <div class="stat" style="margin-top:12px"><div class="dot"></div><div><b>üîÆ D·ª± ƒëo√°n t∆∞∆°ng lai kkkk</b><p style="margin:6px 0 0">"Ph√°n ƒëo√°n" s·ª± vi·ªác n√†o c≈©ng ƒë√∫ng.</p></div></div>
        <div class="stat" style="margin-top:12px"><div class="dot"></div><div><b>üìã Lu√¥n chu·∫©n b·ªã nhi·ªÅu plan</b><p style="margin:6px 0 0">Cho m·ªôt t√¨nh hu·ªëng.</p></div></div>
        <hr class="hr"/><p style="margin:0;font-size:13px">üí° Double-click title ƒë·ªÉ xem secret!</p>
      </div>
    </section>

    <section class="card" id="awards" style="margin-top:14px"><div class="kicker">D·∫§U ·∫§N</div><h2>Awards & Achievements</h2>
      <div class="grid grid3" style="margin-top:12px">
        <div class="msgCard"><div class="who">‚è∞ Time Master</div><div class="quote">"Qu·∫£n l√Ω th·ªùi gian x·ªãn, kh√¥ng bao gi·ªù th·∫•y rush ho·∫∑c h·ªëi h·∫£."</div></div>
        <div class="msgCard"><div class="who">üòå Calm & Confident</div><div class="quote">"B√¨nh tƒ©nh v√† t·ª± tin trong m·ªçi ho√†n c·∫£nh."</div></div>
        <div class="msgCard"><div class="who">üíñ High EQ</div><div class="quote">"Nh·∫≠n bi·∫øt c·∫£m x√∫c c·ªßa ƒë·ªëi ph∆∞∆°ng chu·∫©n x√°c."</div></div>
        <div class="msgCard"><div class="who">‚ú® Problem Solver</div><div class="quote">"X·ª≠ l√Ω v·∫•n ƒë·ªÅ g·ªçn g√†ng, kh√¥ng ph·ª©c t·∫°p h∆°n m·ª©c c·∫ßn thi·∫øt."</div></div>
        <div class="msgCard"><div class="who">ü§ù Th·∫•u c·∫£m</div><div class="quote">"Lu√¥n hi·ªÉu v√† ƒë·ªìng c·∫£m v·ªõi m·ªçi ng∆∞·ªùi."</div></div>
        <div class="msgCard"><div class="who">üåü Role Model</div><div class="quote">"Trong c√°ch l√†m vi·ªác v√† ra quy·∫øt ƒë·ªãnh."</div></div>
      </div>
      <div class="highlight-box">
        <p style="margin:0;font-size:16px;color:var(--text)">üëâ <b>V√† ƒë·∫∑c bi·ªát l√† khi l√†m vi·ªác v·ªõi Jenny:</b></p>
        <p style="margin:8px 0 0">M·ªçi ng∆∞·ªùi th·∫•y y√™n t√¢m h∆°n, l√†m vi·ªác r√µ r√†ng h∆°n, v√†‚Ä¶ tin r·∫±ng m·ªçi th·ª© s·∫Ω ·ªïn! üíñ</p>
      </div>
    </section>

    <section class="card" id="gallery" style="margin-top:14px"><div class="kicker">MOMENTS</div><h2>Kho·∫£nh kh·∫Øc n·ªïi b·∫≠t</h2><p>Nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ üíï</p>
      <div class="marquee"><div class="marqueeTrack">
        <img src="./anh1.JPG" class="marqueeImg" alt="·∫¢nh 1"><img src="./anh2.JPG" class="marqueeImg" alt="·∫¢nh 2"><img src="./anh3.jpg" class="marqueeImg" alt="·∫¢nh 3"><img src="./anh6.jpg" class="marqueeImg" alt="·∫¢nh 6"><img src="./anh7.jpg" class="marqueeImg" alt="·∫¢nh 7"><img src="./anh8.jpg" class="marqueeImg" alt="·∫¢nh 8"><img src="./anh9.jpg" class="marqueeImg" alt="·∫¢nh 9"><img src="./anh11.jpg" class="marqueeImg" alt="·∫¢nh 11">
        <img src="./anh1.JPG" class="marqueeImg" alt="·∫¢nh 1b"><img src="./anh2.JPG" class="marqueeImg" alt="·∫¢nh 2b"><img src="./anh3.jpg" class="marqueeImg" alt="·∫¢nh 3b"><img src="./anh6.jpg" class="marqueeImg" alt="·∫¢nh 6b"><img src="./anh7.jpg" class="marqueeImg" alt="·∫¢nh 7b"><img src="./anh8.jpg" class="marqueeImg" alt="·∫¢nh 8b"><img src="./anh9.jpg" class="marqueeImg" alt="·∫¢nh 9b"><img src="./anh11.jpg" class="marqueeImg" alt="·∫¢nh 11b">
      </div></div>
      <p style="margin-top:10px;font-size:13px">Tip: Ch·∫°m/hover ƒë·ªÉ t·∫°m d·ª´ng.</p>
    </section>

    <section class="card" id="messages" style="margin-top:14px"><div class="kicker">FROM Friends with love</div><h2>L·ªùi ch√∫c t·ª´ nh·ªØng ng∆∞·ªùi d·ªÖ th∆∞∆°ng</h2><p style="margin-top:6px">Nh·ªØng l·ªùi ch√∫c ·∫•m √°p üíñ</p><div class="msgGrid" id="msgGrid" style="margin-top:12px"></div></section>

    <section class="card" id="voice" style="margin-top:14px"><div class="kicker">VOICE NOTES</div><h2>üéôÔ∏è L·ªùi ch√∫c b·∫±ng gi·ªçng n√≥i</h2><p>Nh·∫•n play ƒë·ªÉ nghe üíñ</p>
      <div class="msgGrid" style="margin-top:12px">
        <div class="msgCard audioCard"><div class="who">Qu·∫ø Nh∆∞</div><div class="quote">"QN ch√∫c b·∫£o b·ªëi sinh nh·∫≠t th·∫≠t zuiiiii, tu·ªïi m·ªõi th·∫≠t gi√†uuuuu üíñ"</div><audio controls style="width:100%;margin-top:10px"><source src="./audio/voice_01.mp3" type="audio/mpeg"></audio></div>
        <div class="msgCard audioCard"><div class="who">Mr. ƒê·ªá</div><div class="quote">"Ch√∫c ch·ªã Tr√¢n tu·ªïi m·ªõi kh·ªèe re"</div><audio controls style="width:100%;margin-top:10px"><source src="./audio/voice_02.mp3" type="audio/mpeg"></audio></div>
      </div>
    
    <section class="card" id="kalimba" style="margin-top:14px">
      <div class="kicker">KALIMBA</div>
      <h2>üé∂ Kalimba ‚Äì Happy Birthday</h2>
      <p>Ch·∫°m v√†o t·ª´ng ph√≠m ƒë·ªÉ ph√°t √¢m. B·∫≠t ‚ÄúH∆∞·ªõng d·∫´n‚Äù ƒë·ªÉ web highlight ph√≠m c·∫ßn b·∫•m üéÅ</p>

      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
        <button class="btn btnPrimary" id="btnAudioOn">üîä B·∫≠t √¢m thanh</button>
        <button class="btn" id="btnGuide">üß≠ H∆∞·ªõng d·∫´n: OFF</button>
        <button class="btn" id="btnResetSong">‚Ü∫ Reset b√†i</button>
              <button class="btn" id="btnKalimbaRotate">üì± Xoay ngang</button>
        <button class="btn" id="btnKalimbaFull">‚õ∂ To√†n m√†n h√¨nh</button>
</div>

      <div class="kalimbaWrap" style="margin-top:14px">
        <div class="kalimbaTop">
          <div class="kalimbaHint">
            <b>G·ª£i √Ω b·∫•m (s·ªë ‚Äì n·ªët):</b>
            <div class="songLine">5 5 6 5 1‚Äô 7</div>
            <div class="songLine">5 5 6 5 2‚Äô 1‚Äô</div>
            <div class="songLine">5 5 5‚Äô 3‚Äô 1‚Äô 7 6</div>
            <div class="songLine">4‚Äô 4‚Äô 3‚Äô 1‚Äô 2‚Äô 1‚Äô</div>
            <div class="songNote" style="margin-top:8px">
              (Trong ƒê√¥ tr∆∞·ªüng: 1=C,2=D,3=E,4=F,5=G,6=A,7=B; d·∫•u ‚Äô l√† l√™n 1 qu√£ng 8)
            </div>
          </div>

          <div class="kalimbaNow" id="kalimbaNow">
            <div class="nowTitle">üéØ Ph√≠m c·∫ßn b·∫•m:</div>
            <div class="nowKey" id="nowKey">‚Äî</div>
            <div class="nowSub" id="nowSub">B·∫≠t H∆∞·ªõng d·∫´n ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
          </div>
        </div>

        <div class="kalimbaBoard" id="kalimbaBoard" aria-label="Kalimba keys"></div>
        <div class="kalimbaSwipeHint"><span class="swipeIcon">‚áÜ</span><div><b>M·∫πo:</b> Vu·ªët ngang tr√™n Kalimba ƒë·ªÉ xem ƒë·ªß ph√≠m. Khi b·∫≠t <b>H∆∞·ªõng d·∫´n</b>, web s·∫Ω t·ª± canh ph√≠m c·∫ßn b·∫•m v√†o gi·ªØa üëå</div></div>
      </div>
    </section>


    <section class=\"card\" id=\"scratch\" style="margin-top:14px"><div class="kicker">B√ç M·∫¨T</div><h2>üé´ C√†o l·ªô l·ªùi ch√∫c</h2><p>D√πng chu·ªôt c√†o ƒë·ªÉ xem!</p><div class="scratch-container" id="scratchContainer"><div class="scratch-reveal">üéÅ Ch√∫c Jenny GI√ÄU - ƒê·∫∏P - KH·ªéE! üíñ</div><canvas class="scratch-canvas" id="scratchCanvas"></canvas></div></section>

    <section class="card" id="slot" style="margin-top:14px"><div class="kicker">V·∫¨N MAY</div><h2>üé∞ Quay s·ªë l·ªùi ch√∫c</h2><div class="slot-machine"><div class="slot-display"><div class="slot-item" id="slot1">üéÇ</div><div class="slot-item" id="slot2">üéÅ</div><div class="slot-item" id="slot3">üéâ</div></div><button class="btn btnPrimary" id="btnSpin">üé∞ Quay ngay!</button><div class="slot-result" id="slotResult">B·∫•m ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c!</div></div></section>

    <section class="card" id="quiz" style="margin-top:14px"><div class="kicker">QUIZ</div><h2>Team hi·ªÉu Jenny t·ªõi ƒë√¢u?</h2>
      <div class="q"><b>C√¢u 1:</b> Mood c·ªßa Jenny khi cƒÉng?<label class="opt"><input type="radio" name="q1" value="0"> H∆°i g·∫Øt</label><label class="opt"><input type="radio" name="q1" value="1"> ƒêi·ªÅm tƒ©nh</label><label class="opt"><input type="radio" name="q1" value="0"> Im l·∫∑ng</label></div>
      <div class="q"><b>C√¢u 2:</b> Jenny mu·ªën team l√†m t·ªët?<label class="opt"><input type="radio" name="q2" value="0"> N√≥i hay</label><label class="opt"><input type="radio" name="q2" value="1"> Th·ª±c thi xu·∫•t s·∫Øc</label><label class="opt"><input type="radio" name="q2" value="0"> Reply nhanh</label></div>
      <div class="q"><b>C√¢u 3:</b> Signature c·ªßa Jenny?<label class="opt"><input type="radio" name="q3" value="1"> Chu·∫©n cao + h·ªó tr·ª£</label><label class="opt"><input type="radio" name="q3" value="0"> Vui t√≠nh</label><label class="opt"><input type="radio" name="q3" value="0"> Kh√¥ng feedback</label></div>
      <button class="btn btnPrimary" id="btnCheck">Ch·∫•m ƒëi·ªÉm</button><div class="result" id="quizResult"></div>
    </section>

    <section class="card" id="finale" style="margin-top:14px"><div class="kicker">FINALE</div><h2>L·ªùi k·∫øt</h2><p style="font-size:18px;color:var(--text)">Ch√∫c Jenny tu·ªïi m·ªõi th·∫≠t nhi·ªÅu nƒÉng l∆∞·ª£ng v√† lu√¥n r·ª±c r·ª°! üíñ</p><div style="display:flex;gap:10px;margin-top:16px"><button class="btn btnPrimary" id="btnConfetti">üéâ B·∫Øn ph√°o</button><a class="btn" href="#spotlight" style="text-decoration:none">‚¨ÜÔ∏è L√™n ƒë·∫ßu</a></div></section>
  </div>
  <div class="backdrop" id="backdrop"><div class="modal"><div class="modalTop"><b>üé¨ Video b·∫•t ng·ªù</b><button class="btn closeX" id="btnClose">‚úï</button></div><div class="modalBody"><div class="videoBox">VIDEO PLACEHOLDER</div></div></div></div>
  <!-- Kalimba Fullscreen -->
  <div class="kalimbaFullscreen" id="kalimbaFullscreen" aria-hidden="true">
    <div class="kalimbaFullscreenCard" role="dialog" aria-label="Kalimba fullscreen">
      <div class="kalimbaFullscreenTop">
        <b>üé∂ Kalimba ‚Äì To√†n m√†n h√¨nh</b>
        <span class="tip">Tip: Xoay ngang ƒëi·ªán tho·∫°i ƒë·ªÉ ch∆°i tho·∫£i m√°i h∆°n</span>
        <div class="spacer"></div>
        <button class="btn" id="btnKalimbaRotateFs">üì± Xoay ngang</button>
        <button class="btn" id="btnKalimbaClose">‚úï</button>
      </div>
      <div class="kalimbaFullscreenBody">
        <div class="kalimbaStage" id="kalimbaStage">
          <div class="kalimbaBoard" id="kalimbaBoardFull" aria-label="Kalimba keys fullscreen"></div>
        </div>
        <div class="kalimbaSwipeHint"><span class="swipeIcon">‚áÜ</span><div>Vu·ªët ngang ƒë·ªÉ xem ƒë·ªß ph√≠m (Guide s·∫Ω highlight ƒë·ªìng b·ªô).</div></div>
      </div>
    </div>
  </div>


  <script>
    const isCoarse=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches;
    let count=3;const countdownOverlay=document.getElementById('countdownOverlay'),countdownNum=document.getElementById('countdownNum');
    function startCountdown(){document.getElementById('loading').classList.add('hide');const i=setInterval(()=>{count--;if(count>0){countdownNum.style.animation='none';countdownNum.offsetHeight;countdownNum.style.animation='countPop 0.5s';countdownNum.textContent=count}else if(count===0){countdownNum.textContent='üéâ';countdownNum.style.fontSize='120px'}else{clearInterval(i);countdownOverlay.classList.add('hide');setTimeout(boom,300);startBalloons()}},800)}
    window.addEventListener('load',()=>setTimeout(startCountdown,500));
    document.getElementById('menuToggle').onclick=()=>document.getElementById('navLinks').classList.toggle('show');
    const canvas=document.getElementById('confetti'),ctx=canvas.getContext('2d');let W,H,parts=[],running=false;
    function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight}addEventListener('resize',resize);resize();
    function spawn(n=220){const colors=['#ffb3c8','#ffd6a5','#cdb4ff','#a7f3d0','#fbbf24','#f472b6'];for(let i=0;i<n;i++)parts.push({x:Math.random()*W,y:-20-Math.random()*H*.25,vx:(Math.random()-.5)*2.2,vy:2.8+Math.random()*5.2,s:4+Math.random()*7,r:Math.random()*Math.PI,vr:(Math.random()-.5)*.22,a:1,color:colors[Math.floor(Math.random()*colors.length)]});running=true}
    function tick(){if(!running)return;ctx.clearRect(0,0,W,H);parts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.r+=p.vr;p.vy*=.995;p.vy+=.03;p.a*=.998;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);ctx.globalAlpha=Math.max(0,p.a);ctx.fillStyle=p.color;ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s*.72);ctx.restore()});parts=parts.filter(p=>p.y<H+50&&p.a>.06);if(parts.length===0)running=false;requestAnimationFrame(tick)}
    function boom(){spawn(280);tick()}
    document.getElementById('btnBoom').onclick=boom;document.getElementById('btnConfetti').onclick=boom;document.getElementById('btnConfetti2').onclick=boom;
    const confettiIcon=document.getElementById('confettiIcon');
    if(!isCoarse){document.addEventListener('mousemove',e=>{const r=confettiIcon.getBoundingClientRect(),dx=e.clientX-(r.left+r.width/2),dy=e.clientY-(r.top+r.height/2),angle=Math.atan2(dy,dx)*(180/Math.PI);confettiIcon.style.transform='rotate('+(angle-90)+'deg)'});}
    confettiIcon.onclick=boom;
    const sparkles=['‚ú®','‚≠ê','üí´','üåü'];let sparkleT=0;
    if(!isCoarse){document.addEventListener('mousemove',e=>{if(Date.now()-sparkleT<80||Math.random()>.4)return;sparkleT=Date.now();const s=document.createElement('div');s.className='sparkle';s.textContent=sparkles[Math.floor(Math.random()*sparkles.length)];s.style.left=(e.clientX-10)+'px';s.style.top=(e.clientY-10)+'px';document.body.appendChild(s);setTimeout(()=>s.remove(),800)});}
    const balloons=['üéà','ü©∑','üíú','üíõ','ü©µ'];
    function createBalloon(){const b=document.createElement('div');b.className='balloon';b.textContent=balloons[Math.floor(Math.random()*balloons.length)];b.style.left=Math.random()*(innerWidth-50)+'px';b.style.animationDuration=(5+Math.random()*4)+'s';document.body.appendChild(b);setTimeout(()=>b.remove(),10000)}
    function startBalloons(){for(let i=0;i<10;i++)setTimeout(createBalloon,i*300);setInterval(createBalloon,3000)}
    document.addEventListener('click',e=>{if(['BUTTON','INPUT','A'].includes(e.target.tagName))return;const hearts=['üíñ','üíï','üíó','ü©∑'];for(let i=0;i<3;i++)setTimeout(()=>{const h=document.createElement('div');h.className='floating-heart';h.textContent=hearts[Math.floor(Math.random()*hearts.length)];h.style.left=(e.clientX-14)+'px';h.style.top=(e.clientY-14)+'px';document.body.appendChild(h);setTimeout(()=>h.remove(),1500)},i*100)});
    document.querySelectorAll('.card').forEach(c=>c.addEventListener('click',e=>{if(['BUTTON','INPUT'].includes(e.target.tagName))return;const colors=['#ffb3c8','#ffd6a5','#cdb4ff','#a7f3d0'];for(let i=0;i<12;i++){const f=document.createElement('div');f.className='firework';f.style.left=e.clientX+'px';f.style.top=e.clientY+'px';f.style.background=colors[Math.floor(Math.random()*colors.length)];const angle=(i/12)*Math.PI*2,dist=50+Math.random()*50;f.style.setProperty('--tx',Math.cos(angle)*dist+'px');f.style.setProperty('--ty',Math.sin(angle)*dist+'px');document.body.appendChild(f);setTimeout(()=>f.remove(),800)}}));
    const musicBtn=document.getElementById('musicBtn'),musicModal=document.getElementById('musicModal'),musicClose=document.getElementById('musicClose'),ytPlayer=document.getElementById('ytPlayer');
    const youtubeVideoId='Uc7DfbBcfvk';let musicOpen=false;
    musicBtn.onclick=()=>{if(!musicOpen){ytPlayer.src='https://www.youtube.com/embed/'+youtubeVideoId+'?autoplay=1&loop=1&playlist='+youtubeVideoId;musicModal.classList.add('show');musicBtn.textContent='üîä';musicBtn.classList.add('playing');}else{ytPlayer.src='';musicModal.classList.remove('show');musicBtn.textContent='üéµ';musicBtn.classList.remove('playing');}musicOpen=!musicOpen;};
    musicClose.onclick=()=>{ytPlayer.src='';musicModal.classList.remove('show');musicBtn.textContent='üéµ';musicBtn.classList.remove('playing');musicOpen=false;};
    const scratchCanvas=document.getElementById('scratchCanvas'),scratchCtx=scratchCanvas.getContext('2d'),scratchContainer=document.getElementById('scratchContainer');let isScratching=false,scratchReady=false;
    function initScratch(){const rect=scratchContainer.getBoundingClientRect();if(rect.width===0||rect.height===0)return;scratchCanvas.width=rect.width;scratchCanvas.height=rect.height;scratchCtx.globalCompositeOperation='source-over';const gradient=scratchCtx.createLinearGradient(0,0,rect.width,rect.height);gradient.addColorStop(0,'#ffb3c8');gradient.addColorStop(0.5,'#cdb4ff');gradient.addColorStop(1,'#ffd6a5');scratchCtx.fillStyle=gradient;scratchCtx.fillRect(0,0,rect.width,rect.height);scratchCtx.fillStyle='rgba(255,255,255,0.95)';scratchCtx.font='bold 20px system-ui';scratchCtx.textAlign='center';scratchCtx.textBaseline='middle';scratchCtx.fillText('üéÅ C√†o t·∫°i ƒë√¢y ƒë·ªÉ xem!',rect.width/2,rect.height/2);scratchReady=true;}
    function doScratch(x,y){if(!scratchReady)return;scratchCtx.globalCompositeOperation='destination-out';scratchCtx.beginPath();scratchCtx.arc(x,y,30,0,Math.PI*2);scratchCtx.fill();}
    function handleScratch(e){if(!isScratching)return;e.preventDefault();const rect=scratchCanvas.getBoundingClientRect();let x,y;if(e.touches){x=e.touches[0].clientX-rect.left;y=e.touches[0].clientY-rect.top;}else{x=e.clientX-rect.left;y=e.clientY-rect.top;}doScratch(x,y);}
    scratchCanvas.addEventListener('mousedown',e=>{isScratching=true;handleScratch(e)});scratchCanvas.addEventListener('mouseup',()=>isScratching=false);scratchCanvas.addEventListener('mouseleave',()=>isScratching=false);scratchCanvas.addEventListener('mousemove',handleScratch);
    scratchCanvas.addEventListener('touchstart',e=>{isScratching=true;handleScratch(e)},{passive:false});scratchCanvas.addEventListener('touchend',()=>isScratching=false);scratchCanvas.addEventListener('touchmove',handleScratch,{passive:false});
    window.addEventListener('load',()=>setTimeout(initScratch,500));window.addEventListener('resize',()=>{scratchReady=false;setTimeout(initScratch,100)});
    const slotEmojis=['üéÇ','üéÅ','üéâ','üéà','üíñ','‚≠ê','üéä','üíé'],slotMsgs=['üî• JACKPOT! Ch√∫c Jenny GI√ÄU S·ª§!','‚ú® Ch√∫c Jenny T·ªéA S√ÅNG!','üíñ Ch√∫c Jenny ƒë∆∞·ª£c Y√äU TH∆Ø∆†NG!','üéØ Ch√∫c Jenny ƒê·∫†T M·ªåI M·ª§C TI√äU!','üí™ Ch√∫c Jenny S·ª®C KH·ªéE d·ªìi d√†o!','üöÄ Ch√∫c Jenny THƒÇNG TI·∫æN!','üòÑ Ch√∫c Jenny H·∫†NH PH√öC!','üëë Ch√∫c Jenny lu√¥n l√† QUEEN!'];
    const slot1=document.getElementById('slot1'),slot2=document.getElementById('slot2'),slot3=document.getElementById('slot3'),slotResult=document.getElementById('slotResult');let isSpinning=false;
    document.getElementById('btnSpin').onclick=()=>{if(isSpinning)return;isSpinning=true;slot1.classList.add('spinning');slot2.classList.add('spinning');slot3.classList.add('spinning');slotResult.textContent='üé∞ ƒêang quay...';const spin=setInterval(()=>{slot1.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slot2.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slot3.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},100);setTimeout(()=>{slot1.classList.remove('spinning');slot1.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},1000);setTimeout(()=>{slot2.classList.remove('spinning');slot2.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)]},1500);setTimeout(()=>{clearInterval(spin);slot3.classList.remove('spinning');slot3.textContent=slotEmojis[Math.floor(Math.random()*slotEmojis.length)];slotResult.textContent=slotMsgs[Math.floor(Math.random()*slotMsgs.length)];boom();isSpinning=false},2000)};
    const backdrop=document.getElementById('backdrop');document.getElementById('btnOpenVideo').onclick=()=>backdrop.style.display='flex';document.getElementById('btnClose').onclick=()=>backdrop.style.display='none';backdrop.onclick=e=>{if(e.target===backdrop)backdrop.style.display='none'};
    const secret=document.getElementById('secretNote');document.getElementById('title').ondblclick=()=>secret.style.display=secret.style.display==='block'?'none':'block';document.getElementById('brand').ondblclick=()=>secret.style.display=secret.style.display==='block'?'none':'block';
    document.getElementById('btnCheck').onclick=()=>{const pick=n=>{const el=document.querySelector('input[name="'+n+'"]:checked');return el?Number(el.value):null};const a=pick('q1'),b=pick('q2'),c=pick('q3'),res=document.getElementById('quizResult');if(a===null||b===null||c===null){res.style.display='block';res.textContent='Ch·ªçn ƒë·ªß 3 c√¢u nha üòÑ';return}const score=a+b+c;res.style.display='block';if(score===3){res.textContent='üî• 3/3! Team hi·ªÉu Jenny qu√° chu·∫©n!';boom()}else if(score===2)res.textContent='‚ú® 2/3! Kh√° ƒë√∫ng vibe!';else res.textContent='üòÑ 0‚Äì1/3! Quan tr·ªçng l√† ch√¢n th√†nh!'};
    const messages=[{name:"Quin Quin",text:"D√π nh√¨u moment h∆°i ups and downs, nh∆∞ng v·∫´n mong l√†m chung team th·∫≠t l√¢u nha! M√£i b√™n nhau b·∫°n nh√≥e!!"},{name:"Mr. ƒê·ªá",text:"S·∫øp g√¨ ·∫°. M√ÉI ƒê·ªàNH M√ÉI KH·ªéE"}];
    const msgGrid=document.getElementById("msgGrid");if(msgGrid){msgGrid.innerHTML=messages.map(m=>'<div class="msgCard"><div class="who">'+m.name+'</div>'+(m.tag?'<div class="tag">'+m.tag+'</div>':'')+'<div class="quote">"'+m.text+'"</div></div>').join("");}

    // ===== Kalimba (touch/click to play) =====
    (function(){
      const board = document.getElementById('kalimbaBoard');
      const boardFull = document.getElementById('kalimbaBoardFull');
      const btnKalimbaFull = document.getElementById('btnKalimbaFull');
      const kalimbaFullscreen = document.getElementById('kalimbaFullscreen');
      const btnKalimbaClose = document.getElementById('btnKalimbaClose');
      const btnKalimbaRotate = document.getElementById('btnKalimbaRotate');
      const btnKalimbaRotateFs = document.getElementById('btnKalimbaRotateFs');
      const btnAudioOn = document.getElementById('btnAudioOn');
      const btnGuide = document.getElementById('btnGuide');
      const btnResetSong = document.getElementById('btnResetSong');
      const nowKey = document.getElementById('nowKey');
      const nowSub = document.getElementById('nowSub');
      if(!board || !btnAudioOn) return;

      const keys = [
        {id:'C4', note:'C4', freq:261.63, deg:"1"},
        {id:'D4', note:'D4', freq:293.66, deg:"2"},
        {id:'E4', note:'E4', freq:329.63, deg:"3"},
        {id:'F4', note:'F4', freq:349.23, deg:"4"},
        {id:'G4', note:'G4', freq:392.00, deg:"5"},
        {id:'A4', note:'A4', freq:440.00, deg:"6"},
        {id:'B4', note:'B4', freq:493.88, deg:"7"},
        {id:'C5', note:'C5', freq:523.25, deg:"1‚Äô"},
        {id:'D5', note:'D5', freq:587.33, deg:"2‚Äô"},
        {id:'E5', note:'E5', freq:659.25, deg:"3‚Äô"},
        {id:'F5', note:'F5', freq:698.46, deg:"4‚Äô"},
        {id:'G5', note:'G5', freq:783.99, deg:"5‚Äô"},
        {id:'A5', note:'A5', freq:880.00, deg:"6‚Äô"},
        {id:'B5', note:'B5', freq:987.77, deg:"7‚Äô"},
        {id:'C6', note:'C6', freq:1046.50, deg:"1‚Äô‚Äô"},
        {id:'D6', note:'D6', freq:1174.66, deg:"2‚Äô‚Äô"},
        {id:'E6', note:'E6', freq:1318.51, deg:"3‚Äô‚Äô"},
      ];

      const center = Math.floor(keys.length/2);

      function renderBoard(el){
        if(!el) return;
        el.innerHTML = keys.map((k,i)=>{
          const dist = Math.abs(i - center);
          const height = Math.max(120, 210 - dist*10);
          const drop = dist*5;
          return `<button class="kKey" data-id="${k.id}" style="height:${height}px; --drop:${drop}px">
            <div class="kLabel">${k.deg}<span class="kSub">${k.note}</span></div>
          </button>`;
        }).join('');
      }

      renderBoard(board);
      renderBoard(boardFull);

      function getAllBoards(){ return [board, boardFull].filter(Boolean); }

      function centerBtn(container, btn){
        try{
          const left = btn.offsetLeft - container.clientWidth/2 + btn.clientWidth/2;
          container.scrollTo({ left, behavior:'smooth' });
        }catch(_){}
      }
let audioCtx = null;
      function ensureAudio(){
        if(audioCtx) return audioCtx;
        const AC = window.AudioContext || window.webkitAudioContext;
        audioCtx = new AC();
        return audioCtx;
      }
      function pluck(freq){
        const ctx = ensureAudio();
        if(ctx.state === 'suspended') ctx.resume();
        const t = ctx.currentTime;

        const osc = ctx.createOscillator();
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(freq, t);

        const osc2 = ctx.createOscillator();
        osc2.type = 'sine';
        osc2.frequency.setValueAtTime(freq*2.01, t);

        const g = ctx.createGain();
        g.gain.setValueAtTime(0.0001, t);
        g.gain.exponentialRampToValueAtTime(0.58, t + 0.01);
        g.gain.exponentialRampToValueAtTime(0.0001, t + 1.25);

        const lp = ctx.createBiquadFilter();
        lp.type = 'lowpass';
        lp.frequency.setValueAtTime(4600, t);
        lp.Q.setValueAtTime(0.75, t);

        const delay = ctx.createDelay(0.25);
        delay.delayTime.setValueAtTime(0.075, t);
        const fb = ctx.createGain();
        fb.gain.setValueAtTime(0.17, t);

        osc.connect(g); osc2.connect(g);
        g.connect(lp);

        lp.connect(ctx.destination);
        lp.connect(delay);
        delay.connect(fb);
        fb.connect(delay);
        delay.connect(ctx.destination);

        osc.start(t); osc2.start(t);
        osc.stop(t + 1.35); osc2.stop(t + 1.35);
      }

      const song = [
        'G4','G4','A4','G4','C5','B4',
        'G4','G4','A4','G4','D5','C5',
        'G4','G4','G5','E5','C5','B4','A4',
        'F5','F5','E5','C5','D5','C5'
      ];

      let guideOn = false;
      let step = 0;

      function clearGuide(){
        board.querySelectorAll('.kKey').forEach(b=>b.classList.remove('guide','wrong'));
      }
      function setGuide(){
        getAllBoards().forEach(b=>b.querySelectorAll('.kKey').forEach(x=>x.classList.remove('guide','wrong')));
        if(!guideOn){
          nowKey.textContent = '‚Äî';
          nowSub.textContent = 'B·∫≠t H∆∞·ªõng d·∫´n ƒë·ªÉ b·∫Øt ƒë·∫ßu';
          return;
        }
        const targetId = song[step];
        const target = keys.find(x=>x.id===targetId);
        nowKey.textContent = target ? `${target.deg} (${target.note})` : targetId;
        nowSub.textContent = `B∆∞·ªõc ${step+1}/${song.length}`;
        getAllBoards().forEach(b=>{
          const btn = b.querySelector(`.kKey[data-id="${targetId}"]`);
          if(btn){
            btn.classList.add('guide');
            // Auto-center the guided key so mobile always sees it
            centerBtn(b, btn);
          }
        });
      }

      function hit(id, fromBtn){
        const k = keys.find(x=>x.id===id);
        if(k) pluck(k.freq);
        btnAudioOn.textContent = 'üîä √Çm thanh: ON';

        if(!guideOn) return;

        const targetId = song[step];
        if(id === targetId){
          step = (step + 1) % song.length;
          setGuide();
        }else{
          const btn = fromBtn || (getAllBoards()[0] && getAllBoards()[0].querySelector(`.kKey[data-id="${id}"]`));
          if(btn){
            btn.classList.add('wrong');
            setTimeout(()=>btn.classList.remove('wrong'), 220);
          }
        }
      }

      function bindBoard(el){
        if(!el) return;
        el.addEventListener('pointerdown', (e)=>{
          const btn = e.target.closest('.kKey');
          if(!btn) return;
          e.preventDefault();
          hit(btn.dataset.id, btn);
        }, {passive:false});
      }
      bindBoard(board);
      bindBoard(boardFull);
btnAudioOn.addEventListener('click', ()=>{
        ensureAudio();
        if(audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
        btnAudioOn.textContent = 'üîä √Çm thanh: ON';
      });

      
      // Fullscreen (better on mobile)
      function tryLockLandscape(){
        try{
          if(screen.orientation && screen.orientation.lock){
            screen.orientation.lock('landscape').catch(()=>{});
          }
        }catch(_){}
      }
      function requestFs(){
        // iOS Safari c√≥ th·ªÉ kh√¥ng h·ªó tr·ª£; fail th√¨ th√¥i
        try{
          const el = kalimbaFullscreen;
          if(el && el.requestFullscreen){
            el.requestFullscreen().catch(()=>{});
          }else if(document.documentElement && document.documentElement.requestFullscreen){
            document.documentElement.requestFullscreen().catch(()=>{});
          }
        }catch(_){}
      }
      function openKalimbaFull(){
        if(!kalimbaFullscreen) return;
        kalimbaFullscreen.classList.add('show');
        kalimbaFullscreen.setAttribute('aria-hidden','false');
        document.body.classList.add('noScroll');
        requestFs();
        // ensure guide highlight is synced & centered in fullscreen
        setTimeout(setGuide, 50);
      }
      function closeKalimbaFull(){
        if(!kalimbaFullscreen) return;
        kalimbaFullscreen.classList.remove('show');
        kalimbaFullscreen.classList.remove('landscape');
        kalimbaFullscreen.setAttribute('aria-hidden','true');
        document.body.classList.remove('noScroll');
        try{
          if(document.fullscreenElement) document.exitFullscreen().catch(()=>{});
        }catch(_){}
      }
      if(btnKalimbaFull) btnKalimbaFull.addEventListener('click', openKalimbaFull);
      if(btnKalimbaClose) btnKalimbaClose.addEventListener('click', closeKalimbaFull);
      function toggleLandscape(force){
        if(!kalimbaFullscreen) return;
        if(force===true) kalimbaFullscreen.classList.add('landscape');
        else if(force===false) kalimbaFullscreen.classList.remove('landscape');
        else kalimbaFullscreen.classList.toggle('landscape');
        if(kalimbaFullscreen.classList.contains('landscape')) tryLockLandscape();
        // re-center highlight after layout change
        setTimeout(setGuide, 80);
      }
      if(btnKalimbaRotate) btnKalimbaRotate.addEventListener('click', ()=>{ openKalimbaFull(); toggleLandscape(true); });
      if(btnKalimbaRotateFs) btnKalimbaRotateFs.addEventListener('click', ()=>{ toggleLandscape(); });
      if(kalimbaFullscreen) kalimbaFullscreen.addEventListener('click', (e)=>{ if(e.target===kalimbaFullscreen) closeKalimbaFull(); });

btnGuide.addEventListener('click', ()=>{
        guideOn = !guideOn;
        btnGuide.textContent = guideOn ? 'üß≠ H∆∞·ªõng d·∫´n: ON' : 'üß≠ H∆∞·ªõng d·∫´n: OFF';
        if(guideOn) ensureAudio();
        setGuide();
      });

      btnResetSong.addEventListener('click', ()=>{
        step = 0;
        setGuide();
      });

      setGuide();
    })();

  </script>
</body>
</html>
